{% extends 'base.html' %}

{% load crispy_forms_tags crispy_forms_filters %}

{% block content %}
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="{% url 'supervisors:task_change_list' %}">Taskboard</a></li>
      <li class="breadcrumb-item"><a href="{% url 'supervisors:task_details' translation.task.pk %}">{{ translation.task.name }}</a></li>
      <li class="breadcrumb-item active" aria-current="page">Translation: {{ translation.language }}</li>
    </ol>
  </nav>
  <h2 class="mb-3">Translation: {{ translation.language }}</h2>

  <div class="card">
    <div class="card-header">
      <p>{{ translation.language.get_html_badge }}</p>
      <p><strong>Original text:</strong></p>
      <p>
        {% if translation.validated_text %}
          {{ translation.validated_text }}
        {% elif translation.text %}
          {{ translation.text }}
        {% else %}
          [Not translated yet]
        {% endif %}
      </p>
      {% if translation.comment %}
        <br>
        <p><strong>Translation comment:</strong></p>
        <p>{{ translation.comment }}</p>
      {% endif %}



    </div>
  </div>
  <br>
  <h4>Translation status</h4>
  {% if translation.translation_time_started and translation.translation_time_finished %}
    <p><em>Finished</em></p>
    <p>By <strong>{{translation.translator}}</strong></p>
    <p>Started at {{translation.translation_time_started}}</p>
    <p>Finished at {{translation.translation_time_finished}}</p>
    <p>Time spent: {{translation.translation_time_started|timesince:translation.translation_time_finished}}</p>
  {% elif translation.translation_time_started and not translation.translation_time_finished %}
    <p><em>In progress</em></p>
    <p>By <strong>{{translation.translator}}</strong></p>
    <p>Started at {{translation.translation_time_started}}</p>
    <p>Time spent: {{translation.translation_time_started|timesince}}</p>
    <a href="{% url 'supervisors:translation_cancel' translation.task.pk translation.pk %}" class="btn btn-danger" role="button">Cancel</a>
  {% else %}
    <p><em>Pending</em></p>
  {% endif %}

  <br>
  <h4>Validation status</h4>
  {% if translation.validation_time_started and translation.validation_time_finished %}
    <p><em>Finished</em></p>
    <p>By <strong>{{translation.validator}}</strong></p>
    <p>Started at {{translation.validation_time_started}}</p>
    <p>Finished at {{translation.validation_time_finished}}</p>
    <p>Time spent: {{translation.validation_time_started|timesince:validation.translation_time_finished}}</p>
  {% elif translation.validation_time_started and not translation.validation_time_finished %}
    <p><em>In progress</em></p>
    <p>By <strong>{{translation.validator}}</strong></p>
    <p>Started at {{translation.validation_time_started}}</p>
    <p>Time spent: {{translation.validation_time_started|timesince}}</p>
    <a href="{% url 'supervisors:translation_cancel' translation.task.pk translation.pk %}" class="btn btn-danger" role="button">Cancel</a>
  {% else %}
    <p><em>Pending</em></p>
  {% endif %}

{% endblock %}
